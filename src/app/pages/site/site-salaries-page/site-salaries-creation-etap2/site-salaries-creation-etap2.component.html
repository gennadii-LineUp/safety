<header class="main-header">
    <div *ngIf="errorSalaries" class="alert alert-danger alert-dismissible fade in" role="alert"  style='position: absolute;' >
        <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)='cancellErrorSalariesMessages()'>
            <span aria-hidden="true"></span>
        </button>
        <p>Votre limite de salariés a été atteinte. Vous utilisez <span>{{salariesUsed}}/{{salariesMaxPossible}} comptes salariés disponibles.</span></p>
    </div>
    <div *ngIf="errorLoad" class="alert alert-danger alert-dismissible fade in" role="alert" style='position: fixed;' >
        <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)='cancellErrorMessage()'>
            <span aria-hidden="true"></span>
        </button>
        <p>SAFETY: <span>{{errorLoad}}</span></p>
    </div>

    <h1>Création d’un salarié</h1>
    <img *ngIf="loading" style='position: absolute; left:49.3%; bottom:15%;' src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
</header>
<div class="main-content" style="padding-top: 12px;" #createSalary2>
    <form #site_newEmployee2Form="ngForm"  novalidate  class="profil-form" (click)='cancellSuccessMessage()'>
        <h2>Etape 2</h2>
        <div class="one-column-input-wrapper">
            <div class="input-wrapper">
                <p [hidden]="name.invalid" class="requred-field color-valid">Nom*</p>
                <input type="text" class="form-control"  placeholder="Nom*"
                        #name="ngModel" id="name" name='name' required [(ngModel)]="employees.name" />
                <p [hidden]="name.valid || name.untouched " class="requred-field ">Champs requis</p>
            </div>
            <div class="input-wrapper">
                <p [hidden]="surname.invalid" class="requred-field color-valid">Prenom*</p>
                <input type="text" class="form-control" placeholder="Prenom*"
                        #surname="ngModel" id="surname" name='surname' required [(ngModel)]="employees.surname" />
                <p [hidden]="surname.valid || surname.untouched " class="requred-field ">Champs requis</p>
            </div>
        </div>
        <div class="one-column-input-wrapper">
            <div class="input-wrapper">
                <p [hidden]="email.invalid" class="requred-field color-valid">Email</p>
                <input type="email" class="form-control"  placeholder="Email"
                       #email="ngModel" id="email" name='email' required email [(ngModel)]="employees.email" />
                <p [hidden]="email.valid || email.untouched " class="requred-field ">Champs requis</p>
            </div>
            <div class="input-wrapper">
                <p [hidden]="post.invalid" class="requred-field color-valid">Poste</p>
                <input type="text" class="form-control"  placeholder="Poste"
                       #post="ngModel" id="post" name='post' required [(ngModel)]="employees.post" />
                <p [hidden]="post.valid || post.untouched " class="requred-field ">Champs requis</p>
            </div>
        </div>
        <div class="one-column-input-wrapper">

            <div class="calendar-wrapper clearfix">
                <p class="form-label" style="font-family:'Open Sans',sans-serif;
                                            font-size:14px;
                                            padding-left:10px;
                                            padding-top:10px;">Date de naissance*</p>
                <input type="text" class="datepicker-default" style="float: left; margin-left: 90px;"
                       #birthDate="ngModel" id='birthDate' name='birthDate'  [(ngModel)]="employees.birthDate"/>
                <p [hidden]=" birthDate.valid || birthDate.untouched " class="requred-field ">Champs requis</p>
                <div class="clearfix"></div>  <!--#birthDate="ngModel"  [(ngModel)]="employees.birthDate"-->
            </div>

            <div class="input-wrapper" style="margin-bottom: 15px;">
                <p [hidden]="numSecu.invalid" class="requred-field color-valid">N° sécu*</p>
                <input type="text" class="form-control"  placeholder="N° sécu*"
                       #numSecu="ngModel" id="numSecu" name='numSecu' required [(ngModel)]="employees.numSecu" />
                <p [hidden]="numSecu.valid || numSecu.untouched " class="requred-field ">Champs requis</p>
            </div>
            <div class="clearfix"></div>
            <p class="form-subheader" style="position: relative;">Photo
              <img *ngIf='loadingPhotoFilePhoto' style='position:absolute; bottom:15%; left:20%; width:16px;' src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
            </p>

            <!--////////////////////////////-->
          <div class="profile-img-wrapper" style="height: 112px;">
            <div class="main-image-editor-wrapper" style="position: relative;">
              <label for="fileInputPhoto">
                <div id="loadedImg" *ngIf="showImgPhoto"
                     [ngStyle]="{'background': 'url(' + imgServerPhoto + ') no-repeat'}"></div>
                <span style="cursor: pointer"></span>
              </label>
              <input id="fileInputPhoto" #fileInputPhoto type="file"   [disabled]="loadingPhotoFilePhoto"
                     (change)="fileChangePhoto($event)"  style="display: none;"
                     accept=".jpg, .jpeg, .bmp, .png, .JPG, .JPEG"/>

              <span *ngIf='uploadedFilePhoto' class="loading_ok"></span>
            </div>
          <div class="clearfix"></div>
          </div>
          <!--////////////////////////////////-->

            <p class="form-subheader clearfix" style='margin: 14px 0 -4px 0;'>Groupe de salariés</p>
            <img *ngIf="loadingGroupes" style='left:18%; bottom: 1%;' src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" /><br>
            <div *ngIf='!loadingGroupes' class="radio-btn-block">
                <div *ngFor="let groupe of employeeGroupes" class="radio" >
                  <input type="radio"   id={{groupe.id}} name="employeeGroup"
                           [(ngModel)]="employees.employeeGroup" [value]="groupe.id"
                           [checked]='checkedGroupFromEtap1==groupe.id'>
                  <label for={{groupe.id}} class="radio-label">{{groupe.id}} {{groupe.name}}</label>
                </div>
            </div>

            <button type="submit" class="form-button green-button modifier-button"
                    [disabled]="!(site_newEmployee2Form.form.valid)"
                    (click)="submitModifyEtap1Form()">Modifier</button>
            <div *ngIf="successCreating" style='position: fixed;' class="alert alert-success">{{successCreating}}</div>

        </div>
        <div class="one-column-input-wrapper">
            <div>
                <p class="form-label" style="font-family:'Open Sans',sans-serif;
                                            font-size:14px;
                                            padding-left:10px;
                                            padding-top:10px;">Période de validité :
                    <span>{{employees.validityPeriod | validityPeriod}}</span>
                </p>
                <p *ngIf="startDate" class="form-label" style="font-family:'Open Sans',sans-serif;
                                            font-size:14px;
                                            padding-left:10px;
                                            padding-top:10px;">Date de début  {{employees.startDate}}</p>
                <p *ngIf="endDate" class="form-label" style="font-family:'Open Sans',sans-serif;
                                            font-size:14px;
                                            padding-left:10px;
                                            padding-top:10px;">Date de fin  {{employees.endDate}}</p>
            </div>
        </div>
    </form>
        <div class="form-divider clearfix" style='margin: 1px 0 15px 0;'></div>

    <!-- N E X T   F O R M -->

    <form #site_newEmployee3DatesAutorisationsForm="ngForm"  novalidate  class="profil-form" (click)='cancellSuccessMessage()'
          (ngSubmit)="submitDatesAutorisationsForm()">
        <div class="one-column-input-wrapper">
            <p class="form-subheader">Visite médicale</p>
            <div class="calendar-wrapper clearfix" style='padding-top: 9px !important;' >
                <p class="form-label" style="font-family:'Open Sans',sans-serif;
                                            font-size:14px;
                                            padding-left:10px;
                                            padding-top:10px;">Date*</p>
                <input type="text" class="datepicker-default" style="float: left; margin-left: 90px;"
                       #visiteMedicale="ngModel" id='visiteMedicale' name='visiteMedicale'  [(ngModel)]="visites.medicalVisitDateExpires"/>
                <img *ngIf="loadingDatesAutorisations" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" style='margin-left: 10%;' />
            </div>
        </div>

        <div class="form-divider clearfix" style='margin-bottom: 6px;'></div>

        <div class="one-column-input-wrapper"  style='padding-top: 12px !important;'>
            <p class="form-subheader">CACES</p>
            <div class="calendar-wrapper clearfix" style='margin-top: 2px !important;' >
                <p class="form-label" style="font-family:'Open Sans',sans-serif;
                                            font-size:14px;
                                            padding-left:10px;
                                            padding-top:10px;">Date*</p>
                <input type="text" class="datepicker-default" style="float: left; margin-left: 90px;"
                       #caces="ngModel" id='caces' name='caces'  [(ngModel)]="visites.cacesDateExpires"/>
                <img *ngIf="loadingDatesAutorisations" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" style='margin-left: 10%;' />
            </div>

            <p class="form-label" style='display: inline-block; width: auto; float: left;'>Fichier *</p>

            <div class="input-wrapper" style='display: inline-block; width: auto;  margin-right: 12px;'>
              <div class="image-upload" style='display: inline-block !important; float: left; margin-left: 74px;'>
                <p>{{uploadFileTextCaces}}</p>
                <label for="fileInputCaces">
                  <span></span>
                </label>
                <input id="fileInputCaces" #fileInputCaces type="file"
                       (change)="fileChangeCaces($event)"
                       accept=".jpg, .jpeg, .bmp, .png, .JPG, .JPEG"/>

                <span *ngIf='uploadedFileCaces' class="loading_ok"></span>
              </div>
            </div>

        </div>

        <div class="form-divider clearfix" style='margin: -1px 0 15px 0;'></div>

        <div class="search-panel clearfix">
            <p>
              <span>Attestations / Habilitations</span>
              <img *ngIf="loadingAttestations" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" style='position: absolute; left: 10%;' />
            </p>
            <button type="button" class="add-an-item-button" (click)="modalAttestOpen(); attestModal.open()"></button>

            <!-- M O D A L -->

        </div>
        <div class="table-wrapper">
            <table class="table-default attestations-de-formation-table">
                <thead>
                <tr>
                    <th *ngFor="let header of headersAttest"  (click)="tableSortService._changeSorting(header.variable, $event);
                                                                getSortingTargetAttest();
                                                                getAttestations(this.sortingTargetAttest);">
                        <button [class]="tableSortService.selectedClass(header.variable)" ></button>
                        {{header.display}}
                    </th>
                    <th style='cursor:default;'>
                        <span>Date de délivrance</span>
                    </th>
                    <th style='cursor:default;'>
                        <span>Date d’expiration</span>
                    </th>
                    <th>
                        <span>Action</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                    <tr *ngIf='emptyTable'>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>

                    <tr *ngFor="let employeeAttestation of employeeAttestations">
                        <td>{{employeeAttestation.name}}</td>
                        <td>{{employeeAttestation.dateIssue | dateFromServerMoment}}</td>
                        <td>{{employeeAttestation.dateExpires | dateFromServerMoment}}</td>
                        <td>
                            <a href="javascript:void(0);" (click)='attestModal.open(); getAttestForUpdateFunction(employeeAttestation.id)'>
                                Modifier
                            </a>
                            /
                            <a href="javascript:void(0);" (click)='deleteAttestFunction(employeeAttestation.id)'>
                              Supprimer
                            </a>
                        </td>
                    </tr>

                </tbody>
            </table>
        </div>
        <div class="form-divider clearfix"></div>
        <div class="search-panel clearfix">
            <p>
              <span>Autorisations de conduite</span>
              <img *ngIf="loadingDrLicences" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" style='position: absolute; left: 10%;' />
            </p>

            <button type="button" class="add-an-item-button" (click)="autorModal.open(); setEmptySelect()"></button>

            <!-- M O D A L -->

        </div>
        <div class="table-wrapper">
            <table class="table-default attestations-de-conduite-table">
                <thead>
                <tr>
                    <th *ngFor="let header of headersPermis"  (click)="changeSorting(header.variable, $event);
                                                               getDrivingLicenses(sortingTargetPermis)">
                      <button [class]="selectedClass(header.variable)"></button>
                      {{header.display}}
                    </th>
                    <th>
                        <span>Action</span>
                    </th>
                </tr>
                </thead>
                <tbody>
                  <tr *ngIf='emptyTable_drLicences'>
                    <td>-</td>
                    <td>-</td>
                  </tr>

                  <tr *ngFor="let drivingLicense of drivingLicenses">
                    <td>{{drivingLicense.type}}</td>
                    <td>
                          <a href="javascript:void(0);" (click)='autorModal.open(); getDrLicenseForUpdateFunction(drivingLicense.id, drivingLicense.machineCategoryId)'>
                            Modifier
                          </a>
                          /
                          <a href="javascript:void(0);" (click)='deleteDrLicenseFunction(drivingLicense.id)'>
                            Supprimer
                          </a>
                    </td>
                  </tr>
                </tbody>
            </table>
        </div>
    </form>
    <div class="button-wrapper">
        <button type="button" class="form-button red-button annuler-button" (click)='gotoSalariesPage()'>Annuler</button>
        <button type="submit" class="form-button green-button sauvegarder-button"
                (click)='submitDatesAutorisationsForm()'>Sauvegarder</button>
      <!--[disabled]="datesAutorisationsEmpty"-->
    </div>
</div>

<modal-attest #attestModal id="attestModal" style='min-width: 454px; max-width: 454px;' tabindex="-1" class='attestation-habilitation-modal'>
    <modal-header-SSAtt>
        <h2>Attestation de formation</h2>
    </modal-header-SSAtt>

    <modal-content-SSAtt>
        <form  #site_AttestationForm="ngForm"  novalidate class="modal-form" (click)='cancellSuccessMessage()'>
            <div class="input-wrapper">
                <p [hidden]="attest_name.invalid" class="requred-field color-valid">Nom*</p>
                <input type="text" class="form-control"  placeholder="Nom*"
                       #attest_name="ngModel" id="attest_name" name='attest_name' required [(ngModel)]="attestation.name" />
                <p [hidden]="attest_name.valid " class="requred-field ">Champs requis</p>
            </div>
            <div class="calendar-wrapper clearfix">
                <div class="clearfix"></div>
                <p>Date de délivrance*</p>
                <input type="text" class="datepicker-default"
                       (click)="datepickerViewInit(); datePicker_attestDelivrance_run(); datesAttestationCheckFunction()"
                       #attest_dateDelivrance="ngModel" id='attest_dateDelivrance' name='attest_dateDelivrance'
                       [(ngModel)]="attestation.dateIssue"/>
                <div class="clearfix"></div>
            </div>
            <div class="calendar-wrapper clearfix">
                <div class="clearfix"></div>
                <p>Date d’expiration*</p>
                <input type="text" class="datepicker-default"
                       (click)="datepickerViewInit(); datePicker_dateExpir_run(); datesAttestationCheckFunction()"
                       #attest_dateExpir="ngModel" id='attest_dateExpir' name='attest_dateExpir'
                       [(ngModel)]="attestation.dateExpires"/>
                <div class="clearfix"></div>
            </div>
            <div class="autres-fichiers-wrapper clearfix">
                <p class="form-subheader">Fichier</p>
                <div class="input-wrapper" style='display: block; width: 100%'>
                  <div class="image-upload" style='display: block; width: 100% !important;'>
                    <p>{{uploadFileTextAttest}}</p>
                    <label for="fileInputAttest">
                      <span></span>
                    </label>
                    <input id="fileInputAttest" #fileInputAttest type="file"
                           (change)="fileChangeAttest($event)"
                           accept=".pdf, .PDF"/>
                    <span *ngIf='uploadedFileAttest' class="loading_ok"></span>
                  </div>
                </div>
             </div>
        </form>
    </modal-content-SSAtt>

    <modal-footer-SSAtt>
        <div *ngIf="errorCreatingAttestat" style='position: fixed; top: -40px  !important;' class="alert alert-danger">{{errorCreatingAttestat}}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)='cancellErrorMessage()'>
                <span aria-hidden="true"></span>
            </button>
        </div>
        <div *ngIf="successCreatingAttestat" style='position: fixed; top: -40px;' class="alert alert-success">{{successCreatingAttestat}}</div>

        <div class="button-wrapper">
            <button type="button" class="form-button red-button annuler-button" data-dismiss="modal"
                    (click)="attestModal.close()">Close</button>
            <button type="submit"  class="form-button green-button enregistrer-button pull-right" data-dismiss="modal"
                    (click)='submitAttestationForm(attest_name.value, attest_dateDelivrance.value, attest_dateExpir.value)'
                    [disabled]="!site_AttestationForm.form.valid">{{saveButtonCaptionAttest}}</button>
        </div>
        <img *ngIf="creatingAttest" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
    </modal-footer-SSAtt>
</modal-attest>


<modal-autor #autorModal style='min-width: 454px; max-width: 454px;' tabindex="-1" class='autorisation-de-conduite-modal'>
    <modal-header-SSAut>
        <h2>Autorisation de conduite</h2>
    </modal-header-SSAut>

    <modal-content-SSAut>
        <div *ngIf="errorCreatingDrLicence" style='position: fixed; top: -40px !important;' class="alert alert-danger">
          {{errorCreatingDrLicence}}
          <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)='cancellErrorMessage()'>
            <span aria-hidden="true"></span>
          </button>
        </div>
        <div *ngIf="successCreatingDrLicence" style='position: fixed; top: -40px;' class="alert alert-success">
          {{successCreatingDrLicence}}
        </div>

        <form action="/" class="modal-form"  (click)='cancellSuccessMessage()'>
            <p class="form-subheader">Type</p>

            <span class="caret"></span>
            <div class="select-wrapper" style="margin-bottom: 24px;">
                <select name="role" [(ngModel)]="activeSelect"  (change)="ShowType(activeSelect)">
                  <option *ngFor="let type of machinesGlossary.TypeM" [value]="type.value">
                        {{type.display}}
                    </option>
                </select>
            </div>

            <div class="tabbable">
                <button class="form-button green-button ok-button pull-right" style="display: none;">Ok</button>
                <div class="clearfix"></div>
                <div class="tab-content" style="min-height: 360px;">

                  <div *ngIf="activeSelect==='3' "class="control-group">
                    <p class="form-subheader">VL</p>
                  </div>

                  <div *ngIf="activeSelect==='4'" class="control-group">
                    <p class="form-subheader">PL</p>
                  </div>

                  <div *ngIf="activeSelect==='5'" class="control-group">
                    <p class="form-subheader">Remorque</p>
                  </div>

                  <div *ngIf="activeSelect==='6'" class="control-group">
                    <p class="form-subheader">Chariots élévateurs R.389</p>
                    <br><br><br>
                    <label *ngFor="let type of machinesGlossary.types_2_engins_6" class="control control--checkbox">{{type.display}}
                      <input type="checkbox" id={{type.id}} name={{type.id}}
                             [value]="type.id" [checked]='checkedDrLicenses.indexOf(+type.id) != -1'
                             (change)='addSubcategory($event); false'>
                      <span class="control__indicator"></span>
                    </label>
                  </div>

                  <div *ngIf="activeSelect==='7'" class="control-group">
                    <p class="form-subheader">Ponts roulants R.318/423</p>
                    <br><br><br>
                    <label *ngFor="let type of machinesGlossary.types_2_engins_7" class="control control--checkbox">{{type.display}}
                      <input type="checkbox" id={{type.id}} name={{type.id}}
                             [value]="type.id" [checked]='checkedDrLicenses.indexOf(+type.id) != -1'
                             (change)='addSubcategory($event); false'>
                      <span class="control__indicator"></span>
                    </label>
                  </div>

                  <div *ngIf="activeSelect==='8'" class="control-group">
                      <p class="form-subheader">Ponts roulants R.318/423</p>
                      <br><br><br>
                      <label *ngFor="let type of machinesGlossary.types_2_engins_8" class="control control--checkbox">{{type.display}}
                          <input type="checkbox" id={{type.id}} name={{type.id}}
                                 [value]="type.id" [checked]='checkedDrLicenses.indexOf(+type.id) != -1'
                                 (change)='addSubcategory($event); false'>
                          <span class="control__indicator"></span>
                      </label>
                  </div>

                  <div *ngIf="activeSelect==='9'" class="control-group">
                    <p class="form-subheader">Ponts roulants R.318/423</p>
                    <br><br><br>
                    <label *ngFor="let type of machinesGlossary.types_2_engins_9" class="control control--checkbox">{{type.display}}
                      <input type="checkbox" id={{type.id}} name={{type.id}}
                             [value]="type.id" [checked]='checkedDrLicenses.indexOf(+type.id) != -1'
                             (change)='addSubcategory($event); false'>
                      <span class="control__indicator"></span>
                    </label>
                  </div>

                  <div *ngIf="activeSelect==='10'" class="control-group">
                    <p class="form-subheader">Grues auxiliaire R.390</p>
                    <br><br><br>
                  </div>

                  <div *ngIf="activeSelect==='11'" class="control-group">
                    <p class="form-subheader">Ponts roulants R.318/423</p>
                    <br>
                    <label *ngFor="let type of machinesGlossary.types_2_engins_11" class="control control--checkbox">{{type.display}}
                      <input type="checkbox" id={{type.id}} name={{type.id}}
                             [value]="type.id" [checked]='checkedDrLicenses.indexOf(+type.id) != -1'
                             (change)='addSubcategory($event); false'>
                      <span class="control__indicator"></span>
                    </label>
                  </div>

                  <div *ngIf="activeSelect==='12'" class="control-group">
                    <p class="form-subheader">Grues mobiles R.383m</p>
                    <br>
                    <p class="vehicle-type">Type 1 : Routier</p>
                    <label *ngFor="let type of machinesGlossary.types_2_engins_12_routier" class="control control--checkbox">{{type.display}}
                      <input type="checkbox"
                             id={{type.id}} name={{type.id}}
                             [value]="type.id" [checked]='checkedDrLicenses.indexOf(+type.id) != -1'
                             (change)='addSubcategory($event); false'>
                      <span class="control__indicator"></span>
                    </label>

                    <br>
                    <p class="vehicle-type">Type 2 : Non routier</p>
                    <label *ngFor="let type of machinesGlossary.types_2_engins_12_nonRoutier" class="control control--checkbox">{{type.display}}
                      <input type="checkbox" id={{type.id}} name={{type.id}}
                             [value]="type.id" [checked]='checkedDrLicenses.indexOf(+type.id) != -1'
                             (change)='addSubcategory($event); false'>
                      <span class="control__indicator"></span>
                    </label>

                    <br>
                    <p class="vehicle-type">Equipement</p>
                    <div *ngFor="let equipement of machinesGlossary.types_2_engins_12_equipement" class="radio" >
                      <input type="radio"   id={{equipement.id}} name="equipementGroup"
                             [value]="equipement.id" (change)='addSubcategoryEquipement($event); false'>  <!-- checked={{equipement.booleanValue}}-->
                      <label for={{equipement.id}} class="radio-label">{{equipement.display}}</label>
                    </div>
                  </div>

                </div>
            </div>
        </form>
    </modal-content-SSAut>

    <modal-footer-SSAut>
        <div class="button-wrapper">
            <img *ngIf="creatingDrivingLicense" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
            <button class="form-button red-button annuler-button" data-dismiss="modal"
                    (click)="autorModal.close()">Annuler</button>
            <button type="submit" class="form-button green-button enregistrer-button pull-right"
                    (click)='submitCategoryDrivingLicense()'
                    [disabled]="categoryDrivingLicense_nullData">{{saveButtonCaption_DrLicense}}</button>
        </div>
    </modal-footer-SSAut>
</modal-autor>
