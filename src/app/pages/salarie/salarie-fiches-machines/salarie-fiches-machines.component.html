<header class="main-header">
  <div *ngIf="errorLoad" class="alert alert-danger alert-dismissible fade in" role="alert" style='position: fixed;' >
    <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)='cancellMessages()'>
      <span aria-hidden="true"></span>
    </button>
    <p>SAFETY: <span>{{errorLoad}}</span></p>
  </div>
  <div *ngIf="successUpdate" style='position: fixed;' class="alert alert-success">{{successUpdate}}</div>

  <h1>Fiches machines</h1>
  <img *ngIf="loading" style='position: absolute; left:49.3%; bottom:15%;' src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />
</header>
<div class="main-content">
    <div class="search-panel clearfix">
        <div class="search-wrapper">
          <button class="search-button" type="button" (click)='findFichiersByNameFunction(findByName.value, 1, "")'></button>
          <input #findByName id="findByName" name='findByName' type="text"
                 class="form-control search-input" placeholder="Rechercher"
                 (keyup.enter)='findFichiersByNameFunction(findByName.value, 1, "")'>
        </div>
    </div>
    <div class="table-wrapper">
        <table class="table-default fiches-machines-table">
            <thead>
                <tr>
                    <th *ngFor="let header of headers"  (click)="changeSorting(header.variable, $event);
                                                               findFichiersByNameFunction(findByName.value, 1, sortingTarget);">
                      <button [class]="selectedClass(header.variable)" ></button>
                      {{header.display}}
                    </th>
                    <th>
                        <span>Action</span>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngIf='emptyTable'>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                </tr>

                <tr *ngFor="let fichier of fichiers" >
                  <td>{{fichier.type}}</td>
                  <td>{{fichier.park_reg}}</td>
                  <td>
                    <a href="javascript:void(0);"
                       (click)='voirFunction(fichier.machine.id);
                               salarieFiches.open();'>{{fichier.machine.id}} Voir</a>
                  </td>
                </tr>
            </tbody>
        </table>
    </div>
  <nav *ngIf="totalItems > 10" aria-label="Page navigation" class="pagination-wrapper">
    <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
      <li *ngIf="!(pager.currentPage === 1)">
        <a class="prev-link" (click)="findFichiersByNameFunction('lineUp', pager.currentPage - 1, '')" aria-label="Previous" >
                  <span aria-hidden="true">
                    <img src="../../../../assets/img/pagination-arrow.png" alt="pagination-arrow">
                  </span>
        </a>
      </li>
      <li *ngIf="!pager.simplePagination" [ngClass]="{active:pager.currentPage === 1}">
        <a href="javascript:void(0);"  (click)="findFichiersByNameFunction('lineUp', 1, '')" >1</a>
      </li>
      <li *ngIf="pager.hiddenAtStart">
        <a (click)="findFichiersByNameFunction('lineUp', pager.startPage-1, '')"  >...</a>
      </li>

      <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
        <a (click)="findFichiersByNameFunction('lineUp', page, '')">{{page}}</a>
      </li>

      <li *ngIf="pager.hiddenAtEnd">
        <a (click)="findFichiersByNameFunction('lineUp', pager.endPage+1, '')" >...</a>
      </li>
      <li *ngIf="!pager.simplePagination" [ngClass]="{active:pager.currentPage === pager.totalPages}">
        <a (click)="findFichiersByNameFunction('lineUp', pager.totalPages, '')">{{pager.totalPages}}</a>
      </li>
      <li *ngIf="!(pager.currentPage === pager.totalPages)" >
        <a href="javascript:void(0);" aria-label="Next" class="next-link"
           (click)="findFichiersByNameFunction('lineUp', pager.currentPage + 1, '')">
                  <span aria-hidden="true">
                    <img src="../../../../assets/img/pagination-arrow.png" alt="pagination-arrow">
                  </span>
        </a>
      </li>
    </ul>
  </nav>
</div>


<salarie-fiches-modal  #salarieFiches>
    <modal-header-SSF>
        <h2>Détails de l’engin</h2>
    </modal-header-SSF>

    <modal-content-SSF>
      <div *ngIf="categoryName" >
        <div class="engine-detailed-info">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)='salarieFiches.close()'>
            <span aria-hidden="true"></span>
          </button>
          <p *ngIf="parentCategoryName"class="form-subheader text-center">{{parentCategoryName}}</p>
          <p *ngIf="categoryName"><span>Catégorie :</span> {{categoryName}}</p>
          <p *ngIf="machine.mark"><span>Marque : </span>{{machine.mark}}</p>
          <p *ngIf="machine.model"><span>Modèle : </span>{{machine.model}}</p>
          <p *ngIf="machine.parkNumber"><span>N° Parc : </span>{{machine.parkNumber}}</p>
          <p *ngIf="machine.registration"><span>Immatriculation : </span>{{machine.registration}}</p>
          <p *ngIf="machine.vgp"><span>Date d’expiration VGP : </span>{{machine.vgp | date: 'dd/MM/yyyy'}}</p>
          <p *ngIf="machine.techControl"><span>Contrôle technique : </span>{{machine.techControl | date: 'dd/MM/yyyy'}}</p>
        </div>
        <div class="qr-code-wrapper">
          <p class="form-subheader text-center">QR Code</p>
          <img src="../../../../assets/img/qr-code-img.png" alt="qr-code-img">
          <p class="form-subheader text-center">immat - n° parc</p>
          <div class="immat-n-parc">
          </div>
        </div>
        <div class="clearfix"></div>
        <div *ngIf="machine.vgp" class="verification-generale-periodique" style="display: block; margin-top: 24px;">
          <p class="form-subheader" style="margin-bottom: 19px; text-align: left;">Vérification Générale Périodique</p>
          <button class="form-button dark-green-button telecharger-button pull-left">Télécharger</button>
        </div>
        <div class="clearfix"></div>
        <div *ngIf="machine.techControl" class="verification-generale-periodique" style="display: block;  margin-top: 24px;">
          <p class="form-subheader" style="margin-bottom: 19px; text-align: left;">Contrôle technique</p>
          <button class="form-button dark-green-button telecharger-button pull-left">Télécharger</button>
        </div>

        <div class="clearfix"></div>
        <div class="autres-fichiers-wrapper button-file-input-wrapper">
          <p class="form-subheader" style="margin-bottom: 19px; text-align: left;">Autres fichiers</p>
          <p class="autres-fichiers">Fichier 1
            <button class="form-button dark-green-button telecharger-button pull-right">Télécharger</button>
          </p>
        </div>
      </div>
    </modal-content-SSF>

    <modal-footer-SSF>
    </modal-footer-SSF>
</salarie-fiches-modal>



<!--<div role="tabpanel" class="tab-pane fade in active" id="r383-details-extended">-->
  <!--<h2>Détails de l’engin</h2>-->
  <!--<div class="engine-detailed-info">-->
    <!--<p class="form-subheader text-center">Grue mobile R.383m</p>-->
    <!--<p><span>Catégorie :</span> Non routier - sur bandage ou rail</p>-->
    <!--<p><span>Marque :</span> Nom de la Marque</p>-->
    <!--<p><span>Modèle :</span> Nom du Modèle</p>-->
    <!--<p><span>N° Parc :</span> numéro de parc</p>-->
    <!--<p><span>Date d’expiration VGP :</span> 00/00/0000</p>-->
    <!--<p><span>Equipement :</span> téléscopique avec fléchette</p>-->
  <!--</div>-->
  <!--<div class="qr-code-wrapper">-->
    <!--<p class="form-subheader text-center">QR Code</p>-->
    <!--<img src="../../../../assets/img/qr-code-img.png" alt="qr-code-img">-->
  <!--</div>-->
  <!--<div class="clearfix"></div>-->
  <!--<div class="verification-generale-periodique">-->
    <!--<p class="form-subheader text-center">Vérification Générale Périodique</p>-->
    <!--<button class="form-button dark-green-button telecharger-button pull-left">Télécharger</button>-->
  <!--</div>-->
  <!--<div class="immat-n-parc">-->
    <!--<p class="form-subheader text-center">immat - n° parc</p>-->
    <!--<button class="form-button dark-green-button telecharger-button pull-left">Télécharger</button>-->
  <!--</div>-->
  <!--<div class="clearfix"></div>-->
  <!--<div class="autres-fichiers-wrapper button-file-input-wrapper">-->
    <!--<p class="form-subheader text-center">Autres fichiers</p>-->
    <!--<div class="image-upload">-->
      <!--<p>Fichier 1</p>-->
      <!--<label for="file-input4">-->
        <!--<span>Télécharger</span>-->
      <!--</label>-->
      <!--<input id="file-input4" type="file">-->
    <!--</div>-->
  <!--</div>-->
  <!--<button type="submit" class="form-button green-button modifier-button pull-right" data-dismiss="modal">Modifier</button>-->
<!--</div>-->
